{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/asus/Documents/HBuilderProjects/vlog-app/pages/user-info/user-info.vue?d7c0","webpack:///C:/Users/asus/Documents/HBuilderProjects/vlog-app/pages/user-info/user-info.vue?4a63","webpack:///C:/Users/asus/Documents/HBuilderProjects/vlog-app/pages/user-info/user-info.vue?0631","uni-app:///pages/user-info/user-info.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,uG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC0M;AAC1M,gBAAgB,0MAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4xB,CAAgB,owBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsDhzB,gD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAHA,mC,+zBAIA,EACA,cACA,wBADA,EAEA,gCAFA,EADA,EAKA,IALA,kBAKA,CACA,SACA,qBADA,EAEA,iCAFA,EAGA,+DAHA,EAIA,cAJA,EAKA,YALA,EAMA,SANA,EAOA,YAPA,GASA,CAfA,EAgBA;AACA,aAjBA,yBAiBA,CACA,4CACA,0CACA,YACA,CACA,CAtBA,EAuBA;AACA,UAxBA,sBAwBA,CACA,4CACA,0CACA,CACA,CA5BA,EA6BA,MA7BA,oBA6BA,CACA,yBACA,eACA,kCACA,8BACA,8BACA,mCACA,kCACA,CACA,CAtCA,EAuCA,0CACA,sBACA,+CADA,GADA,SAIA,UAJA,wBAIA,CACA,gCACA,CANA,GAvCA,EA+CA,WACA;AACA,kBAFA,4BAEA,CACA,kCACA,CAJA,EAKA,SALA,qBAKA,CALA,EAKA;AACA;AACA,KAPA;AAQA;AACA,gBATA,wBASA,CATA,EASA;AACA;AACA,KAXA;AAYA;AACA,gBAbA,0BAaA;AACA;AACA,gBADA;AAEA,gCAFA;AAGA,uCAHA;AAIA;AACA;AACA;AACA;AACA,gBADA,CACA,cADA,EACA;AACA,0CADA;AAEA,wBAFA,EADA;;AAKA,cALA,CAKA;AACA;AACA;AACA,+BADA;AAEA,qCAFA;AAGA,2CAHA;AAIA,2CAJA;AAKA,iCALA;AAMA,uCANA;AAOA,2CAPA;AAQA,yCARA;AASA,+CATA;;AAWA;AACA;AACA;AACA;AACA,+BADA;AAEA,4BAFA;;;AAKA,aARA;AASA,WA3BA;;AA6BA,eA7BA,CA6BA;AACA;AACA,WA/BA;AAgCA,SAvCA;;AAyCA,KAvDA;AAwDA;AACA,gBAzDA,0BAyDA;AACA;AACA,6BADA;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAXA;;AAaA,KAvEA;AAwEA,UAxEA,oBAwEA;AACA;AACA,wBADA;AAEA,8BAFA;AAGA,oCAHA;AAIA,+BAJA;AAKA,gCALA;AAMA,2BANA;AAOA,+BAPA;AAQA,gCARA;AASA,wCATA;;AAWA;AACA;AACA;AACA;AACA,yBADA;AAEA,sBAFA;;AAIA,OAPA;AAQA,KA5FA,EA/CA,E","file":"pages/user-info/user-info.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user-info/user-info.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-info.vue?vue&type=template&id=3a65c7b0&\"\nvar renderjs\nimport script from \"./user-info.vue?vue&type=script&lang=js&\"\nexport * from \"./user-info.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user-info/user-info.vue\"\nexport default component.exports","export * from \"-!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-info.vue?vue&type=template&id=3a65c7b0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\0 学习\\\\大一下\\\\HBuilderX.2.6.1.20200226\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-info.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <uni-list-item title=\"头像\" @click=\"changeAvatar\">\n      <view class=\"flex align-center\" slot=\"right\">\n        <image\n        :src=\"avatar ? avatar :'/static/default.jpg'\"\n        style=\"width: 100rpx; height: 100rpx;\"\n        class=\"rounded-circle\"></image>\n        <text class=\"iconfont icon-bianji1 ml-2\"></text>\n      </view>\n    </uni-list-item>\n    <uni-list-item title = \"昵称\">\n      <view class=\"flex align-center\" slot=\"right\">\n        <input class=\"uni-input text-right\" v-model=\"nickname\">\n        <text class=\"iconfont icon-bianji1 ml-2\"></text>\n      </view>\n    </uni-list-item>\n    <uni-list-item title = \"性别\" @click=\"changeGender\">\n      <view class=\"flex align-center\" slot=\"right\">\n        <text>{{ genderText }}</text>\n        <text class=\"iconfont icon-bianji1 ml-2\"></text>\n      </view>\n    </uni-list-item>\n    <picker mode=\"date\" :value=\"birthday\" @change=\"onDateChange\">\n         <uni-list-item title = \"生日\">\n           <view class=\"flex align-center\" slot=\"right\">\n             <text>{{ birthday }}</text>\n             <text class=\"iconfont icon-bianji1 ml-2\"></text>\n           </view>\n         </uni-list-item>\n    </picker>  \n    <uni-list-item title = \"地址\" @click=\"showCityPicker\">\n      <view class=\"flex align-center\" slot=\"right\">\n        <text>{{ pickerText }}</text>\n        <text class=\"iconfont icon-bianji1 ml-2\"></text>\n      </view>\n    </uni-list-item>\n    \n    <view class=\"py-2 px-3\">\n      <button class=\"bg-main text-white\" style=\"border-radius: 50rpx;border: 0;\" type=\"primary\" @click=\"submit\">\n        完成\n      </button>\n    </view>\n    \n    <mpvue-city-picker :themeColor=\"themeColor\" ref=\"mpvueCityPicker\"\n     :pickerValueDefault=\"cityPickerValueDefault\"\n     @onConfirm = \"onConfirm\"></mpvue-city-picker>\n  </view>\n</template>\n\n<script>\n  const genderArray = ['保密','男','女'];\n  import uniListItem from '@/components/uni-ui/uni-list-item/uni-list-item.vue';\n  import mpvueCityPicker from '@/components/uni-ui/mpvue-citypicker/mpvueCityPicker.vue';\n  import{mapState} from 'vuex';\n  export default {\n    components:{\n      uniListItem,\n      mpvueCityPicker\n    },\n    data() {\n      return {\n        themeColor:'#007AFF',\n        cityPickerValueDefault:[0,0,1],\n        avatar:'http://bnnbucket.oss-cn-hangzhou.aliyuncs.com/tou.jpg',\n        pickerText:'',\n        nickname:'',\n        gender:0,\n        birthday:''\n      };\n    },\n    //监听返回\n    onBackPress(){\n      if(this.$refs.mpvueCityPicker.showPicker){\n        this.$refs.mpvueCityPicker.pickerCancel();\n        return true;\n      }\n    },\n    //监听页面加载\n      onUnload(){\n      if(this.$refs.mpvueCityPicker.showPicker){\n        this.$refs.mpvueCityPicker.pickerCancel();\n      }\n    } ,\n    onLoad(){\n      let userinfo = this.user;\n            if(userinfo){\n        this.nickname = userinfo.nickname;\n        this.avatar = userinfo.avatar;\n        this.gender = userinfo.gender;\n        this.pickerText = userinfo.address;\n        this.birthday = userinfo.birthday;\n      }\n    },\n    computed:{\n      ...mapState({\n        user: state => state.user\n      }),\n      genderText(){\n        return genderArray[this.gender];\n      }\n    },\n    methods: {\n    //显示三级联动城市组件\n      showCityPicker(){\n        this.$refs.mpvueCityPicker.show();\n      },\r\n\t  onConfirm(e) {\r\n\t\t  this.pickerText = e.label;\r\n\t  },\n    //三级联动提交\n      onDateChange(e){\n        this.birthday = e.detail.value;\n      },\n    //修改头像  \n    changeAvatar(){\n      uni.chooseImage({\n        count:1,\n        sizeType:['compressed'],\n        sourceType:['album','camera'],\n        success: res =>{\n          //本地文件地址\n          //console.log(res.tempFilePaths[0]);\n          this.$H\n          .upload('/user/upload',{\n            filePath:res.tempFilePaths[0],\n            name:'file'\n          })\n          .then(result =>{\n            //console.log(result.data);\r\n\t\t\tlet data = {\r\n\t\t\t\tid:this.user.id,\r\n\t\t\t\tphone:this.user.phone,\r\n\t\t\t\tpassword:this.user.password,\r\n\t\t\t\tnickname:this.user.nickname,\r\n\t\t\t\tavatar:result.data,\r\n\t\t\t\tgender:this.user.gender,\r\n\t\t\t\tbirthday:this.user.birthday,\r\n\t\t\t\taddress:this.user.address,\r\n\t\t\t\tcreateTime:this.user.createTime\r\n\t\t\t\t};\r\n\t\t\t\tthis.$H.post('/user/update',data).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthis.$store.commit('editUserInfo',data);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'修改头像成功',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t})\n            \n          .catch(err =>{\n            console.log(err);\n          });\n        }\n      });\n    },\n    //修改性别\n   changeGender(){\n     uni.showActionSheet({\n       itemList:genderArray,\n       success:res =>{\n         this.gender = res.tapIndex;\n         if(this.gender == 0){\n           this.genderText =\"保密\";\n         }else if(this.gender == 1){\n           this.genderText =\"男\";\n         }else if(this.gender == 2){\n           this.genderText =\"女\";\n         }\n       }\n     });\n   },\n   submit(){\n     let data ={\n       id:this.user.id,\n       phone:this.user.phone,\n       password:this.user.password,\n       nickname:this.nickname,\n       avatar:this.user.avatar,\n       gender:this.gender,\n       birthday:this.birthday,\n       address:this.pickerText,\n       createTime:this.user.createTime\n     };\n     this.$H.post('/user/update',data).then(res =>{\n       console.log(res);\n       this.$store.commit('editUserInfo',data);\n       uni.showToast({\n         title:'修改资料成功',\n         icon:'none'\n       });\n     });\n    } \n  }\n };\n</script>\n\n<style>\n\n</style>"],"sourceRoot":""}